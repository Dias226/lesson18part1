(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),c=e=>e<10?"0"+e:e,r=()=>{const e=(()=>{const e=(new Date("15 october 2020").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}})();t.textContent=c(e.hours),o.textContent=c(e.minutes),n.textContent=c(e.seconds),e.timeRemaining<0&&(clearInterval(a),t.textContent="00",o.textContent="00",n.textContent="00")},a=setInterval(r,1e3);r()})(),(()=>{const e=document.querySelector("menu"),t=()=>e.classList.toggle("active-menu");document.addEventListener("click",(o=>{let n=o.target;n.matches("menu li>a")||n.closest(".menu")?(t(),n=n.closest(".menu")):e.classList.contains("active-menu")&&t()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn");let o,n,c=0;const r=()=>{o=requestAnimationFrame(r),c+=.05,c<1?e.style.opacity=c:cancelAnimationFrame(o)},a=()=>{n=requestAnimationFrame(a),c-=.05,c>=0?e.style.opacity=c:(cancelAnimationFrame(n),e.style.display="none")};t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",e.style.opacity="1",window.innerWidth>768&&(e.style.opacity="0",o=requestAnimationFrame(r))}))})),e.addEventListener("click",(e=>{let t=e.target;t.classList.contains("popup-close")?n=requestAnimationFrame(a):(t=t.closest(".popup-content"),t||(n=requestAnimationFrame(a)))}))})(),document.querySelectorAll('a[href="#service-block"], menu li>a').forEach((e=>{e.addEventListener("click",(t=>{var o;t.preventDefault(),o=e.getAttribute("href"),document.querySelector(""+o).scrollIntoView({block:"center",behavior:"smooth"})}))})),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(()=>{let e=event.target;e=e.closest(".service-header-tab"),e&&t.forEach(((n,c)=>{n===e&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content"),o=document.querySelector(".portfolio-dots");let n,c=0;e.forEach((()=>{const e=document.createElement("li");e.classList.add("dot"),o.append(e)}));const r=o.querySelectorAll(".dot");r[0].classList.add("dot-active");const a=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},s=()=>{a(e,c,"portfolio-item-active"),a(r,c,"dot-active"),c++,c>=e.length&&(c=0),l(e,c,"portfolio-item-active"),l(r,c,"dot-active")},i=(e=3e3)=>{n=setInterval(s,e)};t.addEventListener("click",(t=>{t.preventDefault();const o=t.target;o.matches(".portfolio-btn, .dot")&&(a(e,c,"portfolio-item-active"),a(r,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&r.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),l(e,c,"portfolio-item-active"),l(r,c,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(2e3)})(),document.querySelectorAll(".command__photo").forEach(((e,t)=>{e.addEventListener("mouseenter",(e=>{e.target.src=e.target.dataset.img,e.target.dataset.img=`images/command/command-${t+1}.jpg`})),e.addEventListener("mouseleave",(e=>{e.target.src=e.target.dataset.img,e.target.dataset.img=`images/command/command-${t+1}a.jpg`}))})),(e=>{const t=document.querySelector(".calc-type"),o=document.querySelector(".calc-block"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),a=document.getElementById("total"),l=document.querySelectorAll(".calc-block>input");o.addEventListener("change",(o=>{const l=o.target;(l.matches("select")||l.matches("input"))&&(()=>{const o=t.options[t.selectedIndex].value,l=+n.value;let s,i=0,d=1,m=1,u=0,v=0;c.value>1&&(m+=(c.value-1)/10),r.value&&r.value<5?d*=2:r.value&&r.value<10&&(d*=1.5),o&&l&&(i=Math.ceil(e*o*l*d*m)),v=String(i).length**4;const p=()=>{s=requestAnimationFrame(p),u+=v,u<=i?a.textContent=u:(a.textContent=i,cancelAnimationFrame(s))};s=requestAnimationFrame(p)})()})),l.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/\D/g,"")}))}))})(100),(()=>{const e=document.querySelectorAll("input.calc-item"),t=document.querySelectorAll("[type = tel]"),o=document.querySelectorAll('[name="user_name"]'),n=document.querySelector('[name="user_message"]');document.querySelectorAll("form").forEach((e=>e.autocomplete="off"));const c=e=>{e.value=e.value.replace(/[^А-Яа-яЁё ]/i,"")};t.forEach((e=>{e.addEventListener("input",(()=>{t.forEach((e=>{e.addEventListener("input",(()=>{const t=e.closest("form").querySelector("button");/^\+?[78]([-()]*\d){10}$/.test(e.value)?(e.style.border="",t.disabled=!1):(e.style.border="2px solid red",t.disabled=!0)}))}))}))})),e.forEach((e=>{e.addEventListener("input",(()=>e.value=e.value.replace(/\D/g,"")))})),o.forEach((e=>{e.addEventListener("input",(()=>{c(e)}))})),n.addEventListener("input",(()=>{c(n)}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.cssText="font-size: 2rem; font-weight: bolder; color: green; \n      text-shadow: 1px 1px 2px black, 0 0 1em black;",e.forEach((e=>{e.addEventListener("submit",(o=>{o.preventDefault(),e.appendChild(t),t.innerHTML="Загрузка...";var n;(n=new FormData(e),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).then((o=>{if(200!==o.status)throw new Error(`status network ${o.status}!`);t.textContent="Спасибо! Мы скоро с вами свяжемся!",e.reset()})).catch((e=>{t.textContent="Что то пошло не так...",t.style.cssText="font-size: 2rem; font-weight: bolder; color: red; \n                  text-shadow: 1px 1px 2px black, 0 0 1em black;",console.error(e)}))}))}))})()})();